<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Luckless</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;} </style> </head> <body> <article class="project"> <header>   <h1>luckless</h1>   <span class="version">1.0.0</span>    <p class="description">Lockless data structures</p>   </header> <section id="documentation"><article><h1 id="about luckless">About Luckless</h1><p>Luckless is a collection of lock-free data structures. Meaning: these structures only rely on CAS for their operation, which often ends up more efficient than equivalent methods using locks.</p><p>Each data structure in Luckless is implemented in its own package, which exports symbols similar to existing Common Lisp symbols of similar structures. You are meant to create a package-local nickname of the structures' package and use them that way.</p><h2 id="implemented structures">Implemented Structures</h2><p>The following data structures are currently implemented by the library:</p><ul><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST" class="xref">caslist</a></code> (MR|MW) a list or rather a stack-like object.</p></li><li><p><code><a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE" class="xref">castable</a></code> (MR|MW) a hash-table.</p></li><li><p><code><a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE" class="xref">queue</a></code> (SR|MW) a specialised event queue.</p></li></ul></article></section>   <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://shinmera.github.io/atomics/">atomics</a></li><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li></ul> </div>   <div class="row"> <label for="author">Author:</label> <a id="author" href="mailto:shinmera@tymoon.eu">Nicolas Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/shinmera/luckless/blob/master/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://shinmera.github.io/luckless/">https://shinmera.github.io/luckless/</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/Shinmera/luckless.git">https://github.com/Shinmera/luckless.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.LUCKLESS.HASHTABLE"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE">ORG.SHIRAKUMO.LUCKLESS.HASHTABLE</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:CASTABLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE">CASTABLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L96">Source</a>  </header> <div class="docstring"><pre>A lock-free hash-table.

It is safe to set entries from any number of threads simultaneously.
Note that the hash table will never shrink, even if it is cleared or
entries are removed from it. If you need to shrink the table, discard
it and create a new one instead.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAKE-CASTABLE" class="xref">MAKE-CASTABLE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE-P" class="xref">CASTABLE-P</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ASIZE" class="xref">SIZE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACOUNT" class="xref">COUNT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ATEST" class="xref">TEST</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AHASH-FUNCTION" class="xref">HASH-FUNCTION</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AGETHASH" class="xref">GETHASH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AREMHASH" class="xref">REMHASH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ATRY-REMHASH" class="xref">TRY-REMHASH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-ABSENT" class="xref">PUT-IF-ABSENT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-EQUAL" class="xref">PUT-IF-EQUAL</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-PRESENT" class="xref">PUT-IF-PRESENT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACLRHASH" class="xref">CLRHASH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAPHASH" class="xref">MAPHASH</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:CASTABLE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE-P">CASTABLE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L96">Source</a>  </header> <div class="docstring"><pre>Returns true if the object is a CASTABLE

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE" class="xref">CASTABLE (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:CLRHASH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACLRHASH">CLRHASH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L322">Source</a>  </header> <div class="docstring"><pre>Clears the hash table removing all entries.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:COUNT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACOUNT">COUNT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L198">Source</a>  </header> <div class="docstring"><pre>Returns the current number of entries in the table.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ASIZE" class="xref">SIZE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:GETHASH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AGETHASH">GETHASH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">KEY</li>    <li class="argument">TABLE</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">DEFAULT</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L385">Source</a>  </header> <div class="docstring"><pre>Accesses an entry in the hash table.

If no entry was present, DEFAULT is returned.

IF-EXISTS can be one of the following:
  :OVERWRITE --- Replace the entry's value
  :ERROR     --- Signal an error
  NIL        --- Do nothing
IF-DOES-NOT-EXIST can be one of the following:
  :OVERWRITE --- Set the entry's value
  :ERROR     --- Signal an error
  NIL        --- Do nothing

This is safe to call from any number of threads.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:(SETF GETHASH)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3A%28SETF%20GETHASH%29">(SETF GETHASH)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">KEY</li>    <li class="argument">TABLE</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">DEFAULT</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">IF-EXISTS</li>    <li class="argument">IF-DOES-NOT-EXIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L231">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:HASH-FUNCTION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AHASH-FUNCTION">HASH-FUNCTION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L204">Source</a>  </header> <div class="docstring"><pre>Returns the hashing function used.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:MAKE-CASTABLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAKE-CASTABLE">MAKE-CASTABLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TEST</li>    <li class="argument">SIZE</li>    <li class="argument">HASH-FUNCTION</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L172">Source</a>  </header> <div class="docstring"><pre>Create a new castable.

TEST should be one of EQ EQL EQUAL EQUALP
SIZE should be a base size to start the table with. May be modified by
the implementation.
HASH-FUNCTION should be a function of one argument that returns a
integer used as a hash for the argument. Unless explicitly passed,
will determine the hash function to use based on TEST.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE" class="xref">CASTABLE (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:MAPHASH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAPHASH">MAPHASH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FUNCTION</li>    <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L688">Source</a>  </header> <div class="docstring"><pre>Maps over the hash table.

FUNCTION must accept two arguments, the KEY and the VALUE of the entry
currently being mapped.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:PUT-IF-ABSENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-ABSENT">PUT-IF-ABSENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>    <li class="argument">KEY</li>    <li class="argument">VALUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L208">Source</a>  </header> <div class="docstring"><pre>Sets the entry IFF the entry does not exist yet.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:PUT-IF-EQUAL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-EQUAL">PUT-IF-EQUAL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>    <li class="argument">KEY</li>    <li class="argument">NEW-VALUE</li>    <li class="argument">OLD-VALUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L222">Source</a>  </header> <div class="docstring"><pre>Sets the entry IFF the entry already exists and its current value is the specified old-value.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:PUT-IF-PRESENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUT-IF-PRESENT">PUT-IF-PRESENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>    <li class="argument">KEY</li>    <li class="argument">VALUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L215">Source</a>  </header> <div class="docstring"><pre>Sets the entry IFF the entry already exists.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:REMHASH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AREMHASH">REMHASH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">KEY</li>    <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L301">Source</a>  </header> <div class="docstring"><pre>Removes an entry from the hash table.

Returns T if there was an entry in the table.

This is safe to call from any number of threads.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ASIZE">SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L194">Source</a>  </header> <div class="docstring"><pre>Returns the current capacity of the table.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACOUNT" class="xref">COUNT</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:TEST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ATEST">TEST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L201">Source</a>  </header> <div class="docstring"><pre>Returns the equality test function.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:TRY-REMHASH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ATRY-REMHASH">TRY-REMHASH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">TABLE</li>    <li class="argument">KEY</li>    <li class="argument">VAL</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/hashtable.lisp#L307">Source</a>  </header> <div class="docstring"><pre>Removes the entry form the table IFF the value is still the specified one.</pre></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:CASTABLE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ACASTABLE-P">CASTABLE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.HASHTABLE:(SETF CASTABLE-P)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3A%28SETF%20CASTABLE-P%29">(SETF CASTABLE-P)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li>  <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.LUCKLESS.QUEUE"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.LUCKLESS.QUEUE">ORG.SHIRAKUMO.LUCKLESS.QUEUE</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.LUCKLESS.QUEUE:QUEUE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE">QUEUE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L20">Source</a>  </header> <div class="docstring"><pre>A lock-free multiple-writer single-reader queue.

This queue is optimised to allow many writer threads at once and a
single, but efficient-to-iterate reader thread. The queue can resize
to fit more elements, but remains O(1) for PUSH.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AMAKE-QUEUE" class="xref">MAKE-QUEUE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE-P" class="xref">QUEUE-P</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUSH" class="xref">PUSH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3ADISCARD" class="xref">DISCARD</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAPC" class="xref">MAPC</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ALENGTH" class="xref">LENGTH</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:DISCARD"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3ADISCARD">DISCARD</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">QUEUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L68">Source</a>  </header> <div class="docstring"><pre>Discards all elements currently on the queue.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:LENGTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3ALENGTH">LENGTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">QUEUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L124">Source</a>  </header> <div class="docstring"><pre>Returns the number of elements currently set in the queue.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:MAKE-QUEUE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AMAKE-QUEUE">MAKE-QUEUE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">INITIAL-SIZE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L35">Source</a>  </header> <div class="docstring"><pre>Returns a new QUEUE.

The INITIAL-SIZE is a hint as to the capacity of the queue before it
needs to resize.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE" class="xref">QUEUE (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:MAPC"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AMAPC">MAPC</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FUNCTION</li>    <li class="argument">QUEUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L83">Source</a>  </header> <div class="docstring"><pre>Maps FUNCTION over all elements in the queue.

Note that this will also consume all elements, leaving the queue empty
after iteration.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:PUSH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3APUSH">PUSH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ELEMENT</li>    <li class="argument">QUEUE</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L39">Source</a>  </header> <div class="docstring"><pre>Pushes ELEMENT onto the queue.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.QUEUE:QUEUE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE-P">QUEUE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/queue.lisp#L20">Source</a>  </header> <div class="docstring"><pre>Returns T if the object is a QUEUE</pre></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.QUEUE:QUEUE-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3AQUEUE-P">QUEUE-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.QUEUE:(SETF QUEUE-P)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.QUEUE%3A%28SETF%20QUEUE-P%29">(SETF QUEUE-P)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li>  <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.LUCKLESS.LIST"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.LUCKLESS.LIST">ORG.SHIRAKUMO.LUCKLESS.LIST</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.LUCKLESS.LIST:CASLIST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST">CASLIST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L25">Source</a>  </header> <div class="docstring"><pre>A lock-free linked list.

It is safe to add and remove entries from any number of threads
simultaneously.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST" class="xref">CASLIST (function)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST-P" class="xref">CASLIST-P</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ATO-LIST" class="xref">TO-LIST</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMAPC" class="xref">MAPC</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AFIRST" class="xref">FIRST</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ANTH" class="xref">NTH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ALENGTH" class="xref">LENGTH</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3APUSH" class="xref">PUSH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3ADELETE" class="xref">DELETE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.HASHTABLE%3AMEMBER" class="xref">MEMBER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:CASLIST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST">CASLIST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">VALUES</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L35">Source</a>  </header> <div class="docstring"><pre>Returns a new CASLIST containing ELEMENTS.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST" class="xref">CASLIST (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:CASLIST-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST-P">CASLIST-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L25">Source</a>  </header> <div class="docstring"><pre>Returns T if the object is a CASLIST

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST" class="xref">CASLIST (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:DELETE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ADELETE">DELETE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L105">Source</a>  </header> <div class="docstring"><pre>Removes the first occurrence of VALUE in the list.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:FIRST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3AFIRST">FIRST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L54">Source</a>  </header> <div class="docstring"><pre>Returns the first element in the list, or NIL.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:LENGTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ALENGTH">LENGTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L71">Source</a>  </header> <div class="docstring"><pre>Returns the number of elements in the list.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:MAPC"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3AMAPC">MAPC</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FUNCTION</li>    <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L45">Source</a>  </header> <div class="docstring"><pre>Calls FUNCTION with each element in the list.

Returns the list.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:MEMBER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3AMEMBER">MEMBER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L119">Source</a>  </header> <div class="docstring"><pre>Returns T if the VALUE occurs at least once in the list.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:NTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ANTH">NTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">N</li>    <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L60">Source</a>  </header> <div class="docstring"><pre>Returns the N-th element in the list, or NIL.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:PUSH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3APUSH">PUSH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L93">Source</a>  </header> <div class="docstring"><pre>Pushes a new element to the front of the list.</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.LUCKLESS.LIST:TO-LIST"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ATO-LIST">TO-LIST</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LIST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/luckless/blob/master/list.lisp#L80">Source</a>  </header> <div class="docstring"><pre>Turns the CASLIST in to a standard chain of CONSes.</pre></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.LIST:CASLIST-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.LIST%3ACASLIST-P">CASLIST-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.LUCKLESS.LIST:(SETF CASLIST-P)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.LUCKLESS.LIST%3A%28SETF%20CASLIST-P%29">(SETF CASLIST-P)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 